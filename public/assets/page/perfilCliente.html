<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Perfil - HuertoHogar</title>
    <link rel="stylesheet" href="../css/perfilCliente.css">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>

<body>
    <header class="header">
        <div class="container">
            <div class="logo">
                <i class="fas fa-leaf"></i>
                <span>HuertoHogar</span>
            </div>
            <nav class="nav">
                <ul>
                    <li><a href="../index.html">Inicio</a></li>
                    <li><a href="nosotros.html">Nosotros</a></li>
                    <li><a href="blog.html">Blog</a></li>
                    <li><a href="contacto.html">Contacto</a></li>
                    <li><a href="catalogo.html">Catalogo</a></li>
                    <li><a href="carrito.html"><i class="bi bi-cart3"></i> Carrito(<span id="cart-count">0</span>)</a>
                    </li>
                    <li><a href="login.html" id="logout-link">Cerrar Sesión</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="profile-header">
        <div class="container">
            <img src="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
                alt="Foto de perfil" class="profile-avatar" id="profile-avatar">
            <h1 id="welcome-message">Bienvenido, Cliente</h1>
            <p id="user-email">cargando...</p>
            <div class="mt-3">
                <button class="btn btn-logout" id="edit-profile-btn">Editar Perfil</button>
            </div>
        </div>
    </section>

    <div class="container">
        <!-- Profile Completion -->
        <div class="profile-completion">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <span class="completion-text">Completitud de tu perfil</span>
                <span class="completion-text" id="completion-percentage">0%</span>
            </div>
            <div class="progress-custom">
                <div class="progress-bar" id="profile-progress" style="width: 0%"></div>
            </div>
        </div>

        <!-- Stats Cards -->
        <div class="row mb-4">
            <div class="col-md-3 col-sm-6">
                <div class="stats-card">
                    <div class="stats-icon">
                        <i class="fas fa-shopping-bag"></i>
                    </div>
                    <div class="stats-number" id="total-orders">0</div>
                    <div class="stats-label">Pedidos Totales</div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6">
                <div class="stats-card">
                    <div class="stats-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stats-number" id="completed-orders">0</div>
                    <div class="stats-label">Pedidos Completados</div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6">
                <div class="stats-card">
                    <div class="stats-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stats-number" id="pending-orders">0</div>
                    <div class="stats-label">Pedidos Pendientes</div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6">
                <div class="stats-card">
                    <div class="stats-icon">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="stats-number" id="total-spent">$0</div>
                    <div class="stats-label">Total Gastado</div>
                </div>
            </div>
        </div>

        <!-- Tabs Navigation -->
        <div class="row mb-4">
            <div class="col-12">
                <ul class="nav nav-tabs-custom" id="profileTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile"
                            type="button" role="tab">
                            <i class="fas fa-user-circle me-2"></i>Mi Perfil
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="orders-tab" data-bs-toggle="tab" data-bs-target="#orders"
                            type="button" role="tab">
                            <i class="fas fa-shopping-bag me-2"></i>Mis Pedidos
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="address-tab" data-bs-toggle="tab" data-bs-target="#address"
                            type="button" role="tab">
                            <i class="fas fa-map-marker-alt me-2"></i>Mis Direcciones
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="wishlist-tab" data-bs-toggle="tab" data-bs-target="#wishlist"
                            type="button" role="tab">
                            <i class="fas fa-heart me-2"></i>Mi Lista de Deseos
                        </button>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Tabs Content -->
        <div class="tab-content" id="profileTabsContent">
            <!-- Profile Tab -->
            <div class="tab-pane fade show active" id="profile" role="tabpanel">
                <div class="row">
                    <div class="col-lg-8">
                        <div class="profile-card">
                            <div class="card-header-custom">
                                <h3><i class="fas fa-user-edit me-2"></i>Información Personal</h3>
                            </div>
                            <div class="card-body">
                                <form id="profile-form">
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label class="form-label">Nombre Completo</label>
                                            <input type="text" class="form-control-custom" id="fullName"
                                                placeholder="Ingresa tu nombre">
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label">Correo Electrónico</label>
                                            <input type="email" class="form-control-custom" id="email" disabled>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label class="form-label">Teléfono</label>
                                            <input type="tel" class="form-control-custom" id="phone"
                                                placeholder="Ingresa tu teléfono">
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label">Fecha de Registro</label>
                                            <input type="text" class="form-control-custom" id="registrationDate"
                                                disabled>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Sobre Mí</label>
                                        <textarea class="form-control-custom" id="about" rows="3"
                                            placeholder="Cuéntanos sobre ti"></textarea>
                                    </div>
                                    <button type="submit" class="btn-custom" id="save-profile">
                                        <i class="fas fa-save me-2"></i>Guardar Cambios
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="profile-card">
                            <div class="card-header-custom">
                                <h4><i class="fas fa-cog me-2"></i>Preferencias</h4>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">Notificaciones por Email</label>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="emailNotifications" checked>
                                        <label class="form-check-label" for="emailNotifications">
                                            Recibir notificaciones
                                        </label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Productos Favoritos</label>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="favVegetables" checked>
                                        <label class="form-check-label" for="favVegetables">
                                            Verduras
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="favFruits" checked>
                                        <label class="form-check-label" for="favFruits">
                                            Frutas
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="favOrganic">
                                        <label class="form-check-label" for="favOrganic">
                                            Productos Orgánicos
                                        </label>
                                    </div>
                                </div>
                                <button class="btn-outline-primary w-100" id="save-preferences">
                                    <i class="fas fa-sync-alt me-2"></i>Actualizar Preferencias
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Orders Tab -->
            <div class="tab-pane fade" id="orders" role="tabpanel">
                <div class="profile-card">
                    <div class="card-header-custom d-flex justify-content-between align-items-center">
                        <h3><i class="fas fa-history me-2"></i>Historial de Pedidos</h3>
                        <div>
                            <select class="form-control-custom" id="order-filter" style="width: auto;">
                                <option value="all">Todos los pedidos</option>
                                <option value="pending">Pendientes</option>
                                <option value="processing">En proceso</option>
                                <option value="delivered">Entregados</option>
                                <option value="cancelled">Cancelados</option>
                            </select>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table" id="orders-table">
                                <thead>
                                    <tr>
                                        <th>ID Pedido</th>
                                        <th>Fecha</th>
                                        <th>Productos</th>
                                        <th>Total</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="orders-body">
                                    <!-- Las órdenes se cargarán aquí dinámicamente -->
                                </tbody>
                            </table>
                        </div>
                        <div class="text-center" id="no-orders" style="display: none;">
                            <i class="fas fa-shopping-bag fa-3x mb-3 text-muted"></i>
                            <h4>No tienes pedidos aún</h4>
                            <p>¡Comienza a comprar productos frescos en nuestro catálogo!</p>
                            <a href="catalogo.html" class="btn-custom">
                                <i class="fas fa-store me-2"></i>Ir al Catálogo
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Address Tab -->
            <div class="tab-pane fade" id="address" role="tabpanel">
                <div class="row">
                    <div class="col-lg-8">
                        <div class="profile-card">
                            <div class="card-header-custom d-flex justify-content-between align-items-center">
                                <h3><i class="fas fa-map-marked-alt me-2"></i>Mis Direcciones</h3>
                                <button class="btn-custom" id="add-address-btn">
                                    <i class="fas fa-plus me-2"></i>Agregar Dirección
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="row" id="addresses-container">
                                    <!-- Las direcciones se cargarán aquí dinámicamente -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="profile-card">
                            <div class="card-header-custom">
                                <h4><i class="fas fa-info-circle me-2"></i>Información de Envío</h4>
                            </div>
                            <div class="card-body">
                                <p><strong>Zonas de Entrega:</strong></p>
                                <ul class="list-unstyled">
                                    <li><i class="fas fa-check text-success me-2"></i>Santiago (24-48h)</li>
                                    <li><i class="fas fa-check text-success me-2"></i>Valparaíso (48-72h)</li>
                                    <li><i class="fas fa-check text-success me-2"></i>Concepción (72-96h)</li>
                                </ul>
                                <p class="text-muted small mt-3">
                                    <i class="fas fa-exclamation-circle me-2"></i>
                                    Los pedidos realizados antes de las 12:00 PM se entregan al día siguiente.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Wishlist Tab -->
            <div class="tab-pane fade" id="wishlist" role="tabpanel">
                <div class="profile-card">
                    <div class="card-header-custom">
                        <h3><i class="fas fa-heart me-2"></i>Mi Lista de Deseos</h3>
                    </div>
                    <div class="card-body">
                        <div class="row" id="wishlist-container">
                            <!-- Los productos de la lista de deseos se cargarán aquí -->
                        </div>
                        <div class="text-center" id="empty-wishlist" style="display: none;">
                            <i class="fas fa-heart fa-3x mb-3 text-muted"></i>
                            <h4>Tu lista de deseos está vacía</h4>
                            <p>¡Agrega productos que te gusten para comprarlos después!</p>
                            <a href="catalogo.html" class="btn-custom">
                                <i class="fas fa-store me-2"></i>Explorar Productos
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="profile-card">
                    <div class="card-header-custom">
                        <h3><i class="fas fa-bell me-2"></i>Actividad Reciente</h3>
                    </div>
                    <div class="card-body">
                        <div class="activity-timeline" id="activity-timeline">
                            <!-- La actividad se cargará aquí dinámicamente -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>HuertoHogar</h3>
                    <p>Conectando el campo con tu hogar desde 2017</p>
                </div>
                <div class="footer-section">
                    <h3>Contacto</h3>
                    <p><i class="fas fa-phone"></i> +56 9 1234 5678</p>
                    <p><i class="fas fa-envelope"></i> info@huertohogar.cl</p>
                </div>
                <div class="footer-section">
                    <h3>Síguenos</h3>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 HuertoHogar. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Firebase v8 -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <!-- Tu perfilCliente.js -->
    <script src="../js/perfilCliente.js"></script>
</body>

</html>